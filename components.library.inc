<?php
/**
 * @file Browse available component structure.
 */

/**
 * Menu callback for viewing available components.
 */
function _components_library_output() {
  $table = array(
    'attributes' => array(),
    'colgroups' => array(),
    'sticky' => TRUE,
    'empty' => t('No components added yet.'),
    'header' => array(array(
        'data' => t('Section'),
        'field' => 'section',
      ), array(
        'data' => t('Component'),
        'field' => 'component',
      ), array(
        'data' => t('Modifiers'),
        'field' => 'modifiers',
      ), array(
        'data' => t('Variables'),
        'field' => 'variables',
      ),
  ));

  // List all components.
  $table['rows'] = array();
  foreach (components_list() as $component) {
    $table['rows'][] = array(array(
        'data' => $component->getSection(),
        'field' => 'section',
      ), array(
        'data' => $component->getTitle(),
        'field' => 'component',
      ), array(
        'data' => theme_item_list(array(
          'items' => $component->getVariables(),
          'type' => 'ol',
          'attributes' => array(),
          'title' => NULL,
        )),
        'field' => 'variables',
      ), array(
        'data' => theme_item_list(array(
          'items' => $component->getModifiers(),
          'type' => 'ol',
          'attributes' => array(),
          'title' => NULL,
        )),
        'field' => 'modifiers',
      ),
    );
  }
  $table['caption'] = count($table['rows']) . ' components found';

  return theme_table($table);
}
